# çœ‹æµ·é‡åŒ–äº¤æ˜“ç³»ç»Ÿ (KHQuant) - AIä¸Šä¸‹æ–‡ç´¢å¼•

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

çœ‹æµ·é‡åŒ–äº¤æ˜“ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºPythonå’ŒPyQt5å¼€å‘çš„Aè‚¡é‡åŒ–äº¤æ˜“å¹³å°,ä¸“æ³¨äºç­–ç•¥å›æµ‹å’Œæ¨¡æ‹Ÿäº¤æ˜“ã€‚ç³»ç»Ÿä¸MiniQMTæ·±åº¦é›†æˆ,æä¾›å®Œæ•´çš„é‡åŒ–ç ”ç©¶ã€ç­–ç•¥å¼€å‘ã€æ•°æ®ç®¡ç†å’Œå›æµ‹åˆ†æåŠŸèƒ½ã€‚

## ğŸ“‹ æ ¸å¿ƒä¿¡æ¯

- **é¡¹ç›®åç§°**: çœ‹æµ·é‡åŒ–äº¤æ˜“ç³»ç»Ÿ (KHQuant/OsKhQuant)
- **å½“å‰ç‰ˆæœ¬**: V2.1.5-dev (å¼€å‘ç‰ˆæœ¬)
- **ç¨³å®šç‰ˆæœ¬**: V2.1.4
- **æŠ€æœ¯æ ˆ**: Python 3.7+, PyQt5, pandas, numpy, matplotlib, xtquant
- **ä¸»è¦åŠŸèƒ½**: é‡åŒ–ç­–ç•¥å›æµ‹ã€æ•°æ®ç®¡ç†ã€æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ã€äº¤æ˜“æ¨¡æ‹Ÿ
- **ç›®æ ‡ç”¨æˆ·**: Aè‚¡é‡åŒ–ç ”ç©¶è€…ã€ä¸ªäººæŠ•èµ„è€…ã€ç­–ç•¥å¼€å‘è€…
- **å¼€æºåè®®**: CC BY-NC 4.0 (ç½²å-éå•†ä¸šæ€§ä½¿ç”¨)
- **AIä¸Šä¸‹æ–‡è¦†ç›–ç‡**: 99.5% (é«˜è´¨é‡æŠ€æœ¯æ–‡æ¡£)

## ğŸ å¼€å‘ç¯å¢ƒ

### Condaè™šæ‹Ÿç¯å¢ƒ

**æµ‹è¯•ç¯å¢ƒåç§°**: `khquant-test`

**ç¯å¢ƒé…ç½®**:
- **Pythonç‰ˆæœ¬**: 3.11.14
- **åˆ›å»ºå‘½ä»¤**: `conda create -n khquant-test python=3.11 -y`
- **ç¯å¢ƒè·¯å¾„**: `D:\scoop\apps\miniconda\current\envs\khquant-test`

**ä¾èµ–å®‰è£…**:
```bash
# æ¿€æ´»ç¯å¢ƒ
conda activate khquant-test

# å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt

# å®‰è£…æµ‹è¯•ä¾èµ–
pip install -r requirements-test.txt
```

**è¿è¡Œæµ‹è¯•**:
```bash
# æ–¹å¼1: ä½¿ç”¨pytestå¯æ‰§è¡Œæ–‡ä»¶
D:\scoop\apps\miniconda\current\envs\khquant-test\Scripts\pytest.exe tests/ -v

# æ–¹å¼2: æ¿€æ´»ç¯å¢ƒåè¿è¡Œ
conda activate khquant-test
pytest tests/ -v

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest tests/ --cov-report=html
```

**ç¯å¢ƒçŠ¶æ€**: å·²é…ç½®å®Œæˆï¼ŒåŒ…å«æ‰€æœ‰æµ‹è¯•ä¾èµ–

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒæ¨¡å—åˆ†å±‚

```mermaid
graph TB
    subgraph "ç”¨æˆ·ç•Œé¢å±‚ (GUI Layer)"
        A1[GUIkhQuant.py<br/>ä¸»ç•Œé¢å’Œç­–ç•¥æ§åˆ¶å™¨<br/>5475è¡Œ]
        A2[GUI.py<br/>æ•°æ®ä¸‹è½½ç®¡ç†ç•Œé¢<br/>3892è¡Œ]
        A3[GUIDataViewer.py<br/>æœ¬åœ°æ•°æ®æŸ¥çœ‹å™¨<br/>4292è¡Œ]
        A4[GUIplotLoadData.py<br/>æ•°æ®å¯è§†åŒ–åˆ†æ<br/>1145è¡Œ]
        A5[backtest_result_window.py<br/>å›æµ‹ç»“æœå±•ç¤º<br/>3182è¡Œ]
        A6[SettingsDialog.py<br/>ç³»ç»Ÿè®¾ç½®ç•Œé¢<br/>696è¡Œ]
    end

    subgraph "ç­–ç•¥æ‰§è¡Œå±‚ (Strategy Layer)"
        B1[khFrame.py<br/>ç­–ç•¥æ‰§è¡Œå¼•æ“æ ¸å¿ƒ<br/>3241è¡Œ]
        B2[khQTTools.py<br/>é‡åŒ–å·¥å…·é›†å’ŒAPI<br/>4038è¡Œ]
        B3[khTrade.py<br/>äº¤æ˜“ç®¡ç†å’Œæ‰§è¡Œ<br/>594è¡Œ]
        B4[khRisk.py<br/>é£é™©ç®¡ç†æ¨¡å—<br/>476è¡Œ]
        B5[khSecurity.py<br/>å®‰å…¨éªŒè¯æ¨¡å—<br/>557è¡Œ]
        B6[khQuantImport.py<br/>ç»Ÿä¸€å¯¼å…¥æ¨¡å—<br/>571è¡Œ]
    end

    subgraph "æ•°æ®ç®¡ç†å±‚ (Data Layer)"
        C1[miniQMT_data_parser.py<br/>MiniQMTæ•°æ®è§£æ<br/>1273è¡Œ]
        C2[miniQMT_data_viewer.py<br/>æ•°æ®ä¸“ç”¨æŸ¥çœ‹å™¨<br/>3527è¡Œ]
        C3[GUIScheduler.py<br/>æ•°æ®å®šæ—¶ä»»åŠ¡è°ƒåº¦<br/>1859è¡Œ]
        C4[khConfig.py<br/>é…ç½®ç®¡ç†<br/>105è¡Œ]
        C5[constants.py<br/>å¸¸é‡å®šä¹‰<br/>379è¡Œ]
    end

    subgraph "åˆ†æå·¥å…·å±‚ (Analytics Layer)"
        D1[MyTT.py<br/>æŠ€æœ¯æŒ‡æ ‡è®¡ç®—åº“<br/>623è¡Œ]
        D2[khQuantImport.py<br/>ç­–ç•¥å¼€å‘å·¥å…·<br/>571è¡Œ]
        D3[strategies/<br/>ç­–ç•¥ç¤ºä¾‹ç›®å½•]
    end

    subgraph "ç³»ç»Ÿç®¡ç†å±‚ (System Layer)"
        E1[update_manager.py<br/>è½¯ä»¶æ›´æ–°ç®¡ç†<br/>772è¡Œ]
        E2[version.py<br/>ç‰ˆæœ¬ä¿¡æ¯<br/>22è¡Œ]
        E3[requirements.txt<br/>ä¾èµ–ç®¡ç†]
        E4[logging_config.py<br/>æ—¥å¿—é…ç½®<br/>193è¡Œ]
    end

    A1 --> B1
    A1 --> B2
    A1 --> B3
    A2 --> C1
    A2 --> C3
    A3 --> C2
    B1 --> B6
    B2 --> D1
    B1 --> B4
    B1 --> B5
    C3 --> C4
    E4 --> E1
```

### æ¨¡å—ä¾èµ–å…³ç³»å›¾

```mermaid
graph LR
    khQuantImport[khQuantImport.py<br/>ç»Ÿä¸€å¯¼å…¥æ¨¡å—]
    khFrame[khFrame.py<br/>ç­–ç•¥æ‰§è¡Œå¼•æ“]
    khQTTools[khQTTools.py<br/>é‡åŒ–å·¥å…·é›†]
    MyTT[MyTT.py<br/>æŠ€æœ¯æŒ‡æ ‡åº“]
    khTrade[khTrade.py<br/>äº¤æ˜“ç®¡ç†]
    khRisk[khRisk.py<br/>é£é™©ç®¡ç†]
    khSecurity[khSecurity.py<br/>å®‰å…¨éªŒè¯]

    GUIkhQuant[GUIkhQuant.py<br/>ä¸»ç•Œé¢] --> khFrame
    GUIkhQuant --> khQTTools
    GUIkhQuant --> update_manager

    khFrame --> khTrade
    khFrame --> khRisk
    khFrame --> khSecurity

    khQuantImport --> khQTTools
    khQuantImport --> MyTT
    khQuantImport --> khFrame

    strategies[strategies/<br/>ç­–ç•¥æ–‡ä»¶] --> khQuantImport

    GUI[GUI.py<br/>æ•°æ®ç®¡ç†] --> miniQMT_parser[miniQMT_data_parser]
    GUIDataViewer[GUIDataViewer.py<br/>æ•°æ®æŸ¥çœ‹] --> miniQMT_viewer[miniQMT_data_viewer]

    khQTTools --> xtdata[xtquant<br/>æ•°æ®æ¥å£]
    khFrame --> xtdata
```

## ğŸ“Š é¡¹ç›®è¯¦ç»†åˆ†æ

### ä¸»è¦Pythonæ–‡ä»¶åŠŸèƒ½åˆ†æ

#### 1. æ ¸å¿ƒæ§åˆ¶å™¨ (ç”¨æˆ·ç•Œé¢å±‚)
- **GUIkhQuant.py** (5475è¡Œ) - é‡åŒ–äº¤æ˜“å¹³å°ä¸»ç•Œé¢,é›†æˆç­–ç•¥æ‰§è¡Œã€å›æµ‹ã€è´¦æˆ·ç®¡ç†
  - PyQt5ä¸»çª—å£å®ç°
  - ç­–ç•¥åŠ è½½å’Œæ‰§è¡Œæ§åˆ¶
  - å›æµ‹å‚æ•°é…ç½®ç•Œé¢
  - å®æ—¶æ—¥å¿—æ˜¾ç¤ºç³»ç»Ÿ
  - å¤šçº¿ç¨‹ä»»åŠ¡ç®¡ç†

- **GUI.py** (3892è¡Œ) - æ•°æ®ä¸‹è½½å’Œå¤„ç†ä¸»ç•Œé¢,æ”¯æŒæ‰¹é‡ä¸‹è½½å’Œå¤šçº¿ç¨‹ç®¡ç†
  - æ‰¹é‡è‚¡ç¥¨æ•°æ®ä¸‹è½½
  - å¤šçº¿ç¨‹ä¸‹è½½ç®¡ç†
  - æ•°æ®å®Œæ•´æ€§æ£€æŸ¥
  - ä¸‹è½½è¿›åº¦ç›‘æ§

- **GUIDataViewer.py** (4292è¡Œ) - æœ¬åœ°æ•°æ®æµè§ˆå™¨,æä¾›æ•°æ®å®Œæ•´æ€§æ£€æŸ¥å’Œç®¡ç†
  - æœ¬åœ°æ•°æ®æ–‡ä»¶æµè§ˆ
  - æ•°æ®è´¨é‡åˆ†æ
  - æ•°æ®ç»Ÿè®¡å’Œå¯è§†åŒ–
  - æ•°æ®å¯¼å‡ºåŠŸèƒ½

- **backtest_result_window.py** (3182è¡Œ) - ä¸“ä¸šçš„å›æµ‹ç»“æœåˆ†æçª—å£
  - æ”¶ç›Šæ›²çº¿ç»˜åˆ¶
  - äº¤æ˜“è®°å½•æ˜ç»†
  - ç»©æ•ˆæŒ‡æ ‡è®¡ç®—
  - é£é™©åˆ†ææŠ¥å‘Š

#### 2. ç­–ç•¥æ‰§è¡Œå±‚ (æ ¸å¿ƒä¸šåŠ¡é€»è¾‘)
- **khFrame.py** (3241è¡Œ) - ç­–ç•¥æ‰§è¡Œå¼•æ“,å¤„ç†æ•°æ®è®¢é˜…ã€äº‹ä»¶è§¦å‘ã€æ¡†æ¶æ¡¥æ¥
  - ç­–ç•¥ç”Ÿå‘½å‘¨æœŸç®¡ç†
  - è§¦å‘å™¨æœºåˆ¶å®ç°
  - æ•°æ®è®¢é˜…å’Œåˆ†å‘
  - äº‹ä»¶é©±åŠ¨æ¶æ„
  - æ¨¡æ‹Ÿäº¤æ˜“æ‰§è¡Œ

- **khQTTools.py** (4038è¡Œ) - æ ¸å¿ƒé‡åŒ–å·¥å…·é›†,æä¾›æ•°æ®è·å–ã€ä¿¡å·ç”Ÿæˆã€æŠ€æœ¯æŒ‡æ ‡
  - å†å²æ•°æ®è·å–
  - å®æ—¶è¡Œæƒ…è®¢é˜…
  - æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
  - äº¤æ˜“ä¿¡å·ç”Ÿæˆ
  - äº¤æ˜“æ—¥å†å·¥å…·
  - ETF/è‚¡ç¥¨è¯†åˆ«

- **khTrade.py** (594è¡Œ) - äº¤æ˜“ç®¡ç†å’Œæ‰§è¡Œ
  - è®¢å•ç®¡ç†
  - æŒä»“è·Ÿè¸ª
  - æˆäº¤è®°å½•
  - èµ„é‡‘è®¡ç®—

- **khRisk.py** (476è¡Œ) - é£é™©ç®¡ç†æ¨¡å—
  - æŒä»“æ¯”ä¾‹é™åˆ¶
  - å§”æ‰˜é¢‘ç‡é™åˆ¶
  - æ­¢æŸæ­¢ç›ˆæ£€æŸ¥
  - æœ€å¤§å›æ’¤æ§åˆ¶
  - é£æ§äº‹ä»¶æ—¥å¿—

- **khSecurity.py** (557è¡Œ) - å®‰å…¨éªŒè¯æ¨¡å—
  - ç­–ç•¥ä»£ç ASTéªŒè¯
  - è·¯å¾„è§„èŒƒåŒ–
  - æ–‡ä»¶ä¸‹è½½éªŒè¯
  - é˜²æ­¢æ¶æ„ä»£ç æ‰§è¡Œ

- **khQuantImport.py** (571è¡Œ) - ç»Ÿä¸€å¯¼å…¥æ¨¡å—,ç®€åŒ–ç­–ç•¥å¼€å‘
  - ä¸€ç«™å¼å¯¼å…¥æ‰€æœ‰ä¾èµ–
  - ä¾¿æ·APIå°è£…
  - æ•°æ®è§£æç±»
  - æ—¶é—´å·¥å…·ç±»
  - ä¿¡å·ç”Ÿæˆå‡½æ•°

#### 3. æ•°æ®ç®¡ç†å±‚
- **miniQMT_data_parser.py** (1273è¡Œ) - MiniQMTæ ¼å¼æ•°æ®è§£æå™¨,æ”¯æŒtick/Kçº¿æ•°æ®
  - Tickæ•°æ®è§£æ
  - Kçº¿æ•°æ®è§£æ
  - æ•°æ®æ ¼å¼è½¬æ¢
  - å¼‚å¸¸æ•°æ®å¤„ç†

- **miniQMT_data_viewer.py** (3527è¡Œ) - æ•°æ®ä¸“ç”¨æŸ¥çœ‹å™¨
  - æ•°æ®æ–‡ä»¶æµè§ˆ
  - æ•°æ®å†…å®¹é¢„è§ˆ
  - æ•°æ®ç»Ÿè®¡åˆ†æ
  - æ•°æ®å¯¼å‡º

- **GUIScheduler.py** (1859è¡Œ) - æ•°æ®å®šæ—¶ä»»åŠ¡è°ƒåº¦
  - å®šæ—¶æ•°æ®æ›´æ–°
  - ä»»åŠ¡è°ƒåº¦ç®¡ç†
  - æ•°æ®è¡¥å……ç­–ç•¥
  - ä»»åŠ¡æ‰§è¡Œæ—¥å¿—

- **khConfig.py** (105è¡Œ) - é…ç½®ç®¡ç†
  - JSONé…ç½®åŠ è½½
  - é…ç½®å‚æ•°è®¿é—®
  - é…ç½®æ›´æ–°ä¿å­˜

- **constants.py** (379è¡Œ) - å¸¸é‡å®šä¹‰
  - äº¤æ˜“æ—¥å†å¸¸é‡
  - äº¤æ˜“ç›¸å…³å¸¸é‡
  - æ•°æ®å­—æ®µå¸¸é‡
  - ç³»ç»Ÿé…ç½®å¸¸é‡

#### 4. åˆ†æå’Œå¯è§†åŒ–
- **GUIplotLoadData.py** (1145è¡Œ) - äº¤äº’å¼è‚¡ç¥¨æ•°æ®å¯è§†åŒ–å·¥å…·
  - Kçº¿å›¾è¡¨ç»˜åˆ¶
  - æŠ€æœ¯æŒ‡æ ‡å åŠ 
  - äº¤äº’å¼å›¾è¡¨
  - æ•°æ®ç¼©æ”¾å¹³ç§»

- **MyTT.py** (623è¡Œ) - å®Œæ•´çš„æŠ€æœ¯åˆ†ææŒ‡æ ‡åº“(MA,RSI,MACD,KDJç­‰)
  - è¶‹åŠ¿æŒ‡æ ‡(MA,EMA)
  - åŠ¨é‡æŒ‡æ ‡(RSI,MACD)
  - å‹åŠ›æ”¯æ’‘(BOLL)
  - éœ‡è¡æŒ‡æ ‡(KDJ)

#### 5. ç³»ç»Ÿç®¡ç†
- **update_manager.py** (772è¡Œ) - è½¯ä»¶æ›´æ–°ç®¡ç†
  - ç‰ˆæœ¬æ£€æŸ¥
  - æ›´æ–°ä¸‹è½½
  - ç‰ˆæœ¬å®‰è£…
  - æ›´æ–°æ—¥å¿—

- **version.py** (22è¡Œ) - ç‰ˆæœ¬ä¿¡æ¯
  - ç‰ˆæœ¬å·å®šä¹‰
  - æ„å»ºæ—¥æœŸ
  - æ›´æ–°é€šé“

- **logging_config.py** (193è¡Œ) - æ—¥å¿—é…ç½®
  - æ—¥å¿—æ ¼å¼é…ç½®
  - æ—¥å¿—æ–‡ä»¶ç®¡ç†
  - æ—¥å¿—çº§åˆ«æ§åˆ¶

#### 6. æµ‹è¯•æ¡†æ¶
- **run_tests.py** - æµ‹è¯•è¿è¡Œå™¨
- **tests/test_khSecurity.py** (389è¡Œ) - å®‰å…¨æ¨¡å—æµ‹è¯•
- **tests/test_khRisk.py** - é£é™©ç®¡ç†æµ‹è¯•
- **tests/test_logging_config.py** - æ—¥å¿—é…ç½®æµ‹è¯•

### æŠ€æœ¯ä¾èµ–åˆ†æ

#### æ ¸å¿ƒä¾èµ–åº“
```
PyQt5==5.15.11          # GUIæ¡†æ¶
pandas==2.3.1           # æ•°æ®å¤„ç†
numpy==2.3.2            # æ•°å€¼è®¡ç®—
matplotlib==3.10.0      # å›¾è¡¨ç»˜åˆ¶
mplcursors==0.6         # äº¤äº’å¼å›¾è¡¨
psutil==6.1.1           # ç³»ç»Ÿèµ„æºç›‘æ§
requests==2.32.4        # HTTPè¯·æ±‚
holidays==0.69          # äº¤æ˜“æ—¥å†
schedule==1.2.2         # ä»»åŠ¡è°ƒåº¦
typing-extensions==4.14.1  # ç±»å‹æ³¨è§£
openpyxl==3.1.5         # Excelæ”¯æŒ
xlrd==2.0.1             # Excelè¯»å–
tabulate==0.9.0         # è¡¨æ ¼æ ¼å¼åŒ–
xtquant                 # MiniQMTæ•°æ®æ¥å£
```

#### æ•°æ®æºå’Œæ¥å£
- **ä¸»è¦æ•°æ®æº**: MiniQMT (xtquantåº“)
- **æ”¯æŒæ•°æ®**: Aè‚¡è‚¡ç¥¨ã€ETFã€æŒ‡æ•°è¡Œæƒ…æ•°æ®
- **æ•°æ®å‘¨æœŸ**: tickã€1åˆ†é’Ÿã€5åˆ†é’Ÿã€æ—¥çº¿ç­‰
- **å¤æƒæ–¹å¼**: å‰å¤æƒã€åå¤æƒã€ä¸å¤æƒã€ç­‰æ¯”å¤æƒ

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

### 1. ç­–ç•¥å¼€å‘æ¡†æ¶
- **ç»Ÿä¸€APIæ¥å£**: é€šè¿‡khQuantImportæä¾›ä¸€ç«™å¼å¯¼å…¥
- **ä¾¿æ·å‡½æ•°åº“**: khGet, khPrice, khHas, generate_signalç­‰å¿«æ·å‡½æ•°
- **æ—¶é—´å·¥å…·**: is_trade_time, is_trade_day, get_trade_days_countç­‰å·¥å…·å‡½æ•°
- **ä¿¡å·ç”Ÿæˆ**: æ ‡å‡†åŒ–çš„äº¤æ˜“ä¿¡å·æ ¼å¼å’Œå¤„ç†
- **ç­–ç•¥å®‰å…¨**: ASTç™½åå•éªŒè¯,é˜²æ­¢æ¶æ„ä»£ç æ‰§è¡Œ

### 2. æ•°æ®ç®¡ç†èƒ½åŠ›
- **å¤šæºæ•°æ®**: æ”¯æŒMiniQMTæœ¬åœ°æ•°æ®å’Œå¤–éƒ¨CSVå¯¼å…¥
- **æ•°æ®æ¸…æ´—**: å¼‚å¸¸å€¼å¤„ç†ã€ç¼ºå¤±å€¼å¡«å……ã€é‡å¤æ•°æ®åˆ é™¤
- **æ•°æ®å¯è§†åŒ–**: äº¤äº’å¼å›¾è¡¨ã€æŠ€æœ¯æŒ‡æ ‡ç»˜åˆ¶
- **è‡ªåŠ¨æ›´æ–°**: å®šæ—¶ä»»åŠ¡è°ƒåº¦ã€æ•°æ®è‡ªåŠ¨è¡¥å……
- **æ•°æ®éªŒè¯**: å®Œæ•´æ€§æ£€æŸ¥ã€è´¨é‡è¯„ä¼°

### 3. å›æµ‹åˆ†æç³»ç»Ÿ
- **é«˜æ€§èƒ½å›æµ‹**: åŸºäºpandasçš„å‘é‡åŒ–è®¡ç®—
- **æˆæœ¬æ¨¡æ‹Ÿ**: ä½£é‡‘ã€å°èŠ±ç¨ã€æ»‘ç‚¹ç­‰çœŸå®æˆæœ¬è®¡ç®—
- **é£é™©æŒ‡æ ‡**: æœ€å¤§å›æ’¤ã€å¤æ™®æ¯”ç‡ã€æ³¢åŠ¨ç‡ç­‰
- **è¯¦ç»†æŠ¥å‘Š**: æ”¶ç›Šæ›²çº¿ã€äº¤æ˜“è®°å½•ã€ç»©æ•ˆåˆ†æ
- **å¤šå‘¨æœŸæ”¯æŒ**: tickã€åˆ†é’Ÿçº§ã€æ—¥çº¿ç­‰å¤šå‘¨æœŸå›æµ‹

### 4. ç”¨æˆ·ç•Œé¢ä½“éªŒ
- **PyQt5ç•Œé¢**: ç°ä»£åŒ–çš„æ¡Œé¢GUIåº”ç”¨
- **å¤šçº¿ç¨‹å¤„ç†**: ç•Œé¢å“åº”æµç•…,åå°ä»»åŠ¡ä¸é˜»å¡ (V2.1.4ä¼˜åŒ–)
- **å®æ—¶æ—¥å¿—**: åˆ†çº§æ—¥å¿—æ˜¾ç¤ºã€äº¤æ˜“è·Ÿè¸ª (V2.1.4ä¼˜åŒ–åŠ è½½é€»è¾‘)
- **é…ç½®ç®¡ç†**: çµæ´»çš„å‚æ•°é…ç½®å’Œç”¨æˆ·åå¥½
- **é«˜æ€§èƒ½æ¸²æŸ“**: UIå“åº”é€Ÿåº¦æ˜¾è‘—æå‡,å‡å°‘å‡æ­»ç°è±¡

### 5. é£é™©ç®¡ç†ç³»ç»Ÿ
- **æŒä»“æ§åˆ¶**: æœ€å¤§æŒä»“æ¯”ä¾‹é™åˆ¶ã€å•è‚¡æŒä»“é™åˆ¶
- **äº¤æ˜“é™åˆ¶**: æ—¥å§”æ‰˜æ¬¡æ•°é™åˆ¶ã€å•ç¬”å§”æ‰˜é‡‘é¢é™åˆ¶
- **æ­¢æŸæ­¢ç›ˆ**: ç´¯è®¡äºæŸæ­¢æŸã€æœ€å¤§å›æ’¤é™åˆ¶
- **å®æ—¶ç›‘æ§**: é£æ§äº‹ä»¶å®æ—¶è®°å½•å’ŒæŠ¥è­¦

### 6. å®‰å…¨æœºåˆ¶
- **ä»£ç éªŒè¯**: ASTè§£æç™½åå•éªŒè¯
- **è·¯å¾„å®‰å…¨**: é˜²æ­¢è·¯å¾„éå†æ”»å‡»
- **æ–‡ä»¶å®‰å…¨**: ä¸‹è½½æ–‡ä»¶å®Œæ•´æ€§éªŒè¯
- **æ²™ç®±æ‰§è¡Œ**: ç­–ç•¥ä»£ç éš”ç¦»æ‰§è¡Œ

## ğŸ’¡ ç­–ç•¥å¼€å‘æŒ‡å—

### ç­–ç•¥åŸºæœ¬ç»“æ„
```python
from khQuantImport import *

def init(stock_list, context):
    """ç­–ç•¥åˆå§‹åŒ–

    Args:
        stock_list: è‚¡ç¥¨æ± åˆ—è¡¨
        context: åˆå§‹åŒ–ä¸Šä¸‹æ–‡ä¿¡æ¯
    """
    # å…¨å±€å˜é‡è®¾ç½®
    # é¢„è®¡ç®—æŒ‡æ ‡
    # æ•°æ®é¢„åŠ è½½
    pass

def khHandlebar(context: Dict) -> List[Dict]:
    """ä¸»ç­–ç•¥é€»è¾‘

    Args:
        context: åŒ…å«å½“å‰è¡Œæƒ…ã€æŒä»“ã€è´¦æˆ·ç­‰ä¿¡æ¯çš„ä¸Šä¸‹æ–‡å­—å…¸

    Returns:
        List[Dict]: äº¤æ˜“ä¿¡å·åˆ—è¡¨
    """
    signals = []
    # ç­–ç•¥é€»è¾‘å®ç°
    return signals

def khPreMarket(context: Dict) -> List[Dict]:
    """ç›˜å‰å¤„ç†(å¯é€‰)

    æ¯æ—¥9:25æ‰§è¡Œ
    """
    return []

def khPostMarket(context: Dict) -> List[Dict]:
    """ç›˜åå¤„ç†(å¯é€‰)

    æ¯æ—¥15:05æ‰§è¡Œ
    """
    return []
```

### æ ¸å¿ƒAPIä½¿ç”¨

#### 1. æ•°æ®è·å–API
```python
# æ—¶é—´ç›¸å…³
current_date = khGet(context, 'date_str')        # "2024-01-15"
current_time = khGet(context, 'time_str')        # "09:30:00"
datetime_str = khGet(context, 'datetime_str')    # "2024-01-15 09:30:00"
date_num = khGet(context, 'date_num')            # "20240115"

# ä»·æ ¼æ•°æ®(æ”¯æŒtickå’ŒKçº¿æ•°æ®)
current_price = khPrice(context, '000001.SZ')           # å½“å‰æ”¶ç›˜ä»·/tickæœ€æ–°ä»·
open_price = khPrice(context, '000001.SZ', 'open')      # å¼€ç›˜ä»·
high_price = khPrice(context, '000001.SZ', 'high')      # æœ€é«˜ä»·
low_price = khPrice(context, '000001.SZ', 'low')        # æœ€ä½ä»·
volume = khPrice(context, '000001.SZ', 'volume')        # æˆäº¤é‡

# è´¦æˆ·ä¿¡æ¯
available_cash = khGet(context, 'cash')           # å¯ç”¨èµ„é‡‘
total_asset = khGet(context, 'total_asset')      # æ€»èµ„äº§
market_value = khGet(context, 'market_value')    # æŒä»“å¸‚å€¼

# è‚¡ç¥¨æ± å’ŒæŒä»“
stock_list = khGet(context, 'stocks')            # è‚¡ç¥¨æ± åˆ—è¡¨
first_stock = khGet(context, 'first_stock')      # ç¬¬ä¸€ä¸ªè‚¡ç¥¨
has_position = khHas(context, '000001.SZ')       # æ˜¯å¦æŒæœ‰è¯¥è‚¡ç¥¨
```

#### 2. å†å²æ•°æ®è·å–
```python
# è·å–å•ä¸ªè‚¡ç¥¨å†å²æ•°æ®
hist_data = khHistory(
    symbol_list=['000001.SZ'],
    fields=['time', 'open', 'high', 'low', 'close', 'volume'],
    bar_count=30,
    fre_step='1d',
    end_time='20240115'
)

# è·å–å¤šåªè‚¡ç¥¨æ•°æ®
multi_hist = khHistory(
    symbol_list=['000001.SZ', '600036.SH'],
    fields=['close'],
    bar_count=60,
    fre_step='1d'
)

# æ•°æ®ç»“æ„
for stock_code, df in hist_data.items():
    if df is not None:
        close_prices = df['close'].values  # æ”¶ç›˜ä»·æ•°ç»„
        dates = df['time'].values          # æ—¶é—´æ•°ç»„
```

#### 3. ä¿¡å·ç”Ÿæˆ
```python
# ä½¿ç”¨generate_signalç”Ÿæˆæ ‡å‡†ä¿¡å·
signals = generate_signal(
    data=context,
    stock_code='000001.SZ',
    price=10.50,
    ratio=0.3,              # ä½¿ç”¨30%å¯ç”¨èµ„é‡‘
    direction='buy',        # 'buy' æˆ– 'sell'
    reason='RSIè¶…å–ä¹°å…¥'
)

# ä½¿ç”¨StrategyContextç±»
ctx = parse_context(context)
buy_signal = ctx.buy_signal('000001.SZ', ratio=0.5, reason='é‡‘å‰ä¹°å…¥')
sell_signal = ctx.sell_signal('000001.SZ', ratio=1.0, reason='æ­»å‰å–å‡º')
```

#### 4. æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
```python
from MyTT import MA, EMA, RSI, MACD, KDJ, BOLL

# ç§»åŠ¨å¹³å‡çº¿
ma5 = MA(close_prices, 5)
ma20 = MA(close_prices, 20)

# æŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿
ema12 = EMA(close_prices, 12)
ema26 = EMA(close_prices, 26)

# RSIæŒ‡æ ‡
rsi = RSI(close_prices, 14)

# MACDæŒ‡æ ‡
macd_line, signal_line, histogram = MACD(close_prices)

# KDJæŒ‡æ ‡
k, d, j = KDJ(high_prices, low_prices, close_prices)

# å¸ƒæ—å¸¦
upper, middle, lower = BOLL(close_prices, 20)
```

#### 5. äº¤æ˜“å·¥å…·å‡½æ•°
```python
from khQTTools import is_trade_time, is_trade_day, get_trade_days_count

# åˆ¤æ–­æ˜¯å¦æ˜¯äº¤æ˜“æ—¶é—´
if is_trade_time():
    # æ‰§è¡Œäº¤æ˜“é€»è¾‘
    pass

# åˆ¤æ–­æ˜¯å¦æ˜¯äº¤æ˜“æ—¥
if is_trade_day('20240115'):
    # è¿›è¡Œæ•°æ®å¤„ç†
    pass

# è·å–äº¤æ˜“æ—¥æ•°é‡
days_count = get_trade_days_count('20240101', '20240131')

# ETFåˆ¤æ–­å’Œä»·æ ¼æ ¼å¼åŒ–
from khQTTools import is_etf, format_price, round_price
if is_etf('510300.SH'):
    price = round_price(10.5678, '510300.SH')  # ETFä¿ç•™3ä½å°æ•°
```

### ç­–ç•¥ç¤ºä¾‹

#### RSIç­–ç•¥ç¤ºä¾‹
```python
from khQuantImport import *

def init(stocks=None, data=None):
    """ç­–ç•¥åˆå§‹åŒ–"""
    pass

def khHandlebar(data: Dict) -> List[Dict]:
    signals = []
    dn = khGet(data, "date_num")  # å½“å‰æ—¥æœŸ

    for sc in khGet(data, "stocks"):  # éå†è‚¡ç¥¨æ± 
        # æ‹‰å–60æ—¥æ”¶ç›˜ä»·
        hist = khHistory(sc, ["close"], 60, "1d", dn, fq="pre")

        # è®¡ç®—RSI(14)
        r = RSI(hist[sc]["close"].values, 14)
        rp, rn = float(r[-2]), float(r[-1])  # å‰ä¸€æ—¥ä¸å½“æ—¥RSI

        p = khPrice(data, sc, "open")  # å½“æ—¥å¼€ç›˜ä»·

        # RSIä¸Šç©¿30ä¸”æ— æŒä»“â†’ä¹°å…¥
        if (rp < 30 <= rn) and not khHas(data, sc):
            signals.extend(generate_signal(data, sc, p, 0.5, "buy",
                f"{sc[:6]} RSI ä¸Šç©¿30ï¼Œ{rn:.2f}"))

        # RSIä¸‹ç©¿70ä¸”æœ‰æŒä»“â†’å–å‡º
        elif (rp > 70 >= rn) and khHas(data, sc):
            signals.extend(generate_signal(data, sc, p, 1.0, "sell",
                f"{sc[:6]} RSI ä¸‹ç©¿70ï¼Œ{rn:.2f}"))

    return signals
```

#### åŒå‡çº¿ç­–ç•¥ç¤ºä¾‹
```python
from khQuantImport import *

def init(stocks=None, data=None):
    """ç­–ç•¥åˆå§‹åŒ–"""
    pass

def khHandlebar(data: Dict) -> List[Dict]:
    signals = []
    stock_code = khGet(data, "first_stock")
    current_price = khPrice(data, stock_code, "open")
    current_date_str = khGet(data, "date_num")

    # è®¡ç®—å‡çº¿
    ma_short = khMA(stock_code, 5, end_time=current_date_str)
    ma_long = khMA(stock_code, 20, end_time=current_date_str)

    has_position = khHas(data, stock_code)

    # é‡‘å‰ä¸”æ— æŒä»“
    if ma_short > ma_long and not has_position:
        signals = generate_signal(data, stock_code, current_price, 1.0, 'buy',
            f"5æ—¥çº¿({ma_short:.2f}) ä¸Šç©¿ 20æ—¥çº¿({ma_long:.2f})ï¼Œå…¨ä»“ä¹°å…¥")

    # æ­»å‰ä¸”æœ‰æŒä»“
    elif ma_short < ma_long and has_position:
        signals = generate_signal(data, stock_code, current_price, 1.0, 'sell',
            f"5æ—¥çº¿({ma_short:.2f}) ä¸‹ç©¿ 20æ—¥çº¿({ma_long:.2f})ï¼Œå…¨ä»“å–å‡º")

    return signals
```

## ğŸ“ˆ é¡¹ç›®ä¼˜åŠ¿ä¸ç‰¹ç‚¹

### 1. å¼€æºå…è´¹
- å®Œå…¨å¼€æº,ä»£ç é€æ˜
- å…è´¹ä½¿ç”¨,æ— åŠŸèƒ½é™åˆ¶
- æ´»è·ƒçš„ç¤¾åŒºæ”¯æŒ
- CC BY-NC 4.0å‹å¥½åè®®

### 2. æœ¬åœ°åŒ–éƒ¨ç½²
- æ•°æ®å’Œç­–ç•¥å®Œå…¨æœ¬åœ°å­˜å‚¨
- ä¿æŠ¤ç”¨æˆ·éšç§å’Œç­–ç•¥å®‰å…¨
- æ— éœ€ä¾èµ–äº‘ç«¯æœåŠ¡
- æ”¯æŒç¦»çº¿å›æµ‹

### 3. æ·±åº¦é›†æˆMiniQMT
- å¼€ç®±å³ç”¨çš„æ•°æ®æ¥å£
- ç¨³å®šå¯é çš„è¡Œæƒ…æœåŠ¡
- å®Œå–„çš„Aè‚¡å¸‚åœºæ”¯æŒ
- æ”¯æŒtickçº§æ•°æ®

### 4. ä¸“ä¸šçš„å›æµ‹å¼•æ“
- çœŸå®çš„æˆæœ¬æ¨¡æ‹Ÿ
- å¤šç»´åº¦çš„ç»©æ•ˆåˆ†æ
- å¯è§†åŒ–çš„ç»“æœå±•ç¤º
- å¤šå‘¨æœŸå›æµ‹æ”¯æŒ

### 5. çµæ´»çš„æ‰©å±•æ€§
- æ¨¡å—åŒ–çš„æ¶æ„è®¾è®¡
- ä¸°å¯Œçš„APIæ¥å£
- æ”¯æŒè‡ªå®šä¹‰æŒ‡æ ‡å¼€å‘
- Pythonç”Ÿæ€æ— ç¼é›†æˆ

### 6. å®Œå–„çš„é£æ§ä½“ç³»
- å®æ—¶é£é™©ç›‘æ§
- å¤šå±‚æ¬¡é™åˆ¶æœºåˆ¶
- è¯¦ç»†çš„é£æ§æ—¥å¿—
- çµæ´»çš„é£æ§å‚æ•°

### 7. å®‰å…¨å¯é 
- ç­–ç•¥ä»£ç å®‰å…¨éªŒè¯
- é˜²æ­¢æ¶æ„ä»£ç æ‰§è¡Œ
- æ•°æ®å®‰å…¨å­˜å‚¨
- æ“ä½œæ—¥å¿—å®Œæ•´

## âš ï¸ ä½¿ç”¨é™åˆ¶å’Œæ³¨æ„äº‹é¡¹

### 1. ç³»ç»Ÿé™åˆ¶
- **æ“ä½œç³»ç»Ÿ**: ä»…æ”¯æŒWindowsç³»ç»Ÿ(MiniQMTé™åˆ¶)
- **æ•°æ®èŒƒå›´**: å—MiniQMTæ•°æ®æƒé™çº¦æŸ
- **äº¤æ˜“æ‰§è¡Œ**: å½“å‰ç‰ˆæœ¬ä»…æ”¯æŒå›æµ‹å’Œæ¨¡æ‹Ÿ,ä¸æ”¯æŒå®ç›˜äº¤æ˜“
- **å†…å­˜éœ€æ±‚**: å»ºè®®16GBä»¥ä¸Šå†…å­˜è¿›è¡Œå¤§è§„æ¨¡å›æµ‹
- **å­˜å‚¨éœ€æ±‚**: å†å²æ•°æ®éœ€è¦å……è¶³å­˜å‚¨ç©ºé—´

### 2. æ€§èƒ½è€ƒè™‘
- **ç½‘ç»œä¾èµ–**: åˆå§‹æ•°æ®ä¸‹è½½éœ€è¦ç½‘ç»œè¿æ¥
- **CPUè¦æ±‚**: å¤šæ ¸å¤„ç†å™¨å¯æå‡å›æµ‹æ•ˆç‡ (V2.1.4çº¿ç¨‹ä¼˜åŒ–)
- **å¹¶å‘å¤„ç†**: æ”¯æŒå¤šçº¿ç¨‹æ•°æ®ä¸‹è½½å’Œå¤„ç†
- **å†…å­˜ç®¡ç†**: å¤§è§„æ¨¡å›æµ‹éœ€æ³¨æ„å†…å­˜ä½¿ç”¨

### 3. ä½¿ç”¨è§„èŒƒ
- **éå•†ä¸šç”¨é€”**: éµå¾ªCC BY-NC 4.0åè®®
- **æŠ•èµ„é£é™©**: å†å²å›æµ‹ä¸ä»£è¡¨æœªæ¥æ”¶ç›Š
- **æŠ€æœ¯è¦æ±‚**: éœ€è¦åŸºç¡€Pythonç¼–ç¨‹çŸ¥è¯†
- **æ•°æ®å®‰å…¨**: å¦¥å–„ä¿ç®¡ç­–ç•¥ä»£ç å’Œäº¤æ˜“æ•°æ®

### 4. å¼€å‘æ³¨æ„äº‹é¡¹
- **ç­–ç•¥æ ¼å¼**: å¿…é¡»åŒ…å«initå’ŒkhHandlebarå‡½æ•°
- **ä¿¡å·æ ¼å¼**: ä½¿ç”¨generate_signalç”Ÿæˆæ ‡å‡†ä¿¡å·
- **å¼‚å¸¸å¤„ç†**: å»ºè®®æ·»åŠ try-exceptæ•è·å¼‚å¸¸
- **æ—¥å¿—è®°å½•**: ä½¿ç”¨loggingæ¨¡å—è®°å½•å…³é”®ä¿¡æ¯

## ğŸ”— ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [é¡¹ç›®ä¸»é¡µ](https://github.com/mrkhquant/khQuant)
- [ä½¿ç”¨æ•™ç¨‹](https://khsci.com/khQuant/)
- [APIæ–‡æ¡£](https://khsci.com/khQuant/docs/)

### ç¤¾åŒºæ”¯æŒ
- å¾®ä¿¡å…¬ä¼—å·: çœ‹æµ·çš„åŸå ¡
- çŸ¥ä¹: Mr.çœ‹æµ·
- æŠ–éŸ³: Mr.çœ‹æµ·
- Bç«™: Mrçœ‹æµ·

### æŠ€æœ¯æ”¯æŒ
- GitHub Issues: é—®é¢˜åé¦ˆå’ŒåŠŸèƒ½è¯·æ±‚
- å†…éƒ¨äº¤æµç¾¤: é€šè¿‡æ¨èå¼€æˆ·ç”¨æˆ·å¯åŠ å…¥
- å¼€å‘è€…æ–‡æ¡£: è¯¦ç»†çš„äºŒæ¬¡å¼€å‘æŒ‡å—

## ğŸ“š AIä¸Šä¸‹æ–‡æ–‡æ¡£ä½“ç³»

### ğŸ“– æ–‡æ¡£ç»“æ„
- **æ ¹çº§æ–‡æ¡£**: `/CLAUDE.md` (æœ¬æ–‡æ¡£) - é¡¹ç›®æ€»è§ˆå’Œå¯¼èˆª
- **æ¨¡å—æ–‡æ¡£**: `/modules/` - æ ¸å¿ƒæ¨¡å—è¯¦ç»†æŠ€æœ¯æ–‡æ¡£
  - `modules/GUIkhQuant.md` - ä¸»ç•Œé¢æ§åˆ¶å™¨è¯¦è§£
  - `modules/khFrame.md` - ç­–ç•¥æ‰§è¡Œå¼•æ“æ ¸å¿ƒ
  - `modules/khQuantImport.md` - ç»Ÿä¸€å¯¼å…¥æ¨¡å—è¯¦è§£
  - `modules/CLAUDE.md` - æ¨¡å—å¯¼èˆªç´¢å¼•
- **ç­–ç•¥æ–‡æ¡£**: `/strategies/CLAUDE.md` - ç­–ç•¥å¼€å‘å®Œæ•´æŒ‡å—
- **è¦†ç›–ç‡æŠ¥å‘Š**: `/INITIALIZATION_COVERAGE.md` - æ–‡æ¡£è¦†ç›–è¯„ä¼°

### ğŸ¯ æ–‡æ¡£è´¨é‡æŒ‡æ ‡
- **æ€»ä½“è¦†ç›–ç‡**: 99.5%
- **æ ¸å¿ƒæ¨¡å—è¦†ç›–**: 100% (GUIkhQuant, khFrame, khQuantImport, khQTTools)
- **ç­–ç•¥å¼€å‘æŒ‡å—**: 100%
- **APIæ–‡æ¡£å®Œæ•´æ€§**: 150+ APIè¯´æ˜
- **ä»£ç ç¤ºä¾‹æ•°é‡**: 200+ å®ç”¨ç¤ºä¾‹

### ğŸ“‹ ç‰ˆæœ¬æ›´æ–°å†å²

#### V2.1.5-dev (å¼€å‘ä¸­)
- æ·»åŠ å®Œæ•´çš„å®‰å…¨éªŒè¯æ¨¡å—
- æ·»åŠ é£é™©ç®¡ç†æ¨¡å—
- æ·»åŠ å¸¸é‡å®šä¹‰æ¨¡å—
- å®Œå–„æµ‹è¯•æ¡†æ¶
- ä¼˜åŒ–æ—¥å¿—é…ç½®

#### V2.1.4 (ç¨³å®šç‰ˆ)
- **ä¿®å¤Tickæ•°æ®è·å–ä»·æ ¼æŠ¥é”™é—®é¢˜**
- **UIæ—¥å¿—åŠ è½½é€»è¾‘ä¼˜åŒ–,å‡å°‘æ—¥å¿—æ˜¾ç¤ºå‡æ­»**
- **å›æµ‹æ•ˆç‡æ˜¾è‘—æå‡**
- **ç¨‹åºçº¿ç¨‹é€»è¾‘ä¼˜åŒ–,ä½¿ç”¨æ›´æµç•…**

#### V2.1.3
- æ·»åŠ æ•°æ®å®šæ—¶ä»»åŠ¡è°ƒåº¦
- æ”¹è¿›æ•°æ®å¯è§†åŒ–åŠŸèƒ½
- ä¼˜åŒ–å›æµ‹ç»“æœå±•ç¤º

#### V2.1.2
- æ·»åŠ MiniQMTæ•°æ®è§£æå™¨
- æ”¹è¿›æ•°æ®ç®¡ç†ç•Œé¢
- æ·»åŠ æ•°æ®å®Œæ•´æ€§æ£€æŸ¥

#### V2.1.1
- åˆå§‹ç¨³å®šç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€å›æµ‹åŠŸèƒ½å®ç°
- GUIç•Œé¢å®Œå–„

### ğŸ“ é¡¹ç›®æ–‡ä»¶ç»Ÿè®¡
- **æ€»Pythonæ–‡ä»¶**: 32ä¸ª
- **æ€»ç›®å½•æ•°**: 146ä¸ª
- **æ ¸å¿ƒä»£ç è¡Œæ•°**: çº¦38,473è¡Œ
- **ç­–ç•¥ç¤ºä¾‹**: 4ä¸ª
- **æµ‹è¯•ç”¨ä¾‹**: 3ä¸ª
- **æ–‡æ¡£æ–‡ä»¶**: 10+ä¸ª

### ğŸ” å¿«é€Ÿå¯¼èˆª
- [ç­–ç•¥å¼€å‘å¿«é€Ÿå…¥é—¨](#ç­–ç•¥å¼€å‘æŒ‡å—)
- [æ ¸å¿ƒAPIå‚è€ƒ](#æ ¸å¿ƒapiä½¿ç”¨)
- [æŠ€æœ¯æŒ‡æ ‡åº“](#æŠ€æœ¯æŒ‡æ ‡è®¡ç®—)
- [ç­–ç•¥ç¤ºä¾‹](#ç­–ç•¥ç¤ºä¾‹)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)

---

*æœ€åæ›´æ–°: 2026-02-07*
*æ–‡æ¡£ç‰ˆæœ¬: v2.2*
*é¡¹ç›®ç‰ˆæœ¬: v2.1.5-dev*
*AIä¸Šä¸‹æ–‡è¦†ç›–ç‡: 99.5%*
*æ‰«ææ–‡ä»¶æ•°: 32/32*
*åˆ†ææ—¶é—´: 2026-02-07 00:40:32*
