# 触发方式设置

<cite>
**本文档引用文件**   
- [GUIkhQuant.py](file://GUIkhQuant.py)
- [khFrame.py](file://khFrame.py)
- [SettingsDialog.py](file://SettingsDialog.py)
- [GUI.py](file://GUI.py)
- [README.md](file://README.md)
</cite>

## 目录
1. [触发方式配置概述](#触发方式配置概述)
2. [K线触发模式下的kline_cycle_combo](#k线触发模式下的kline_cycle_combo)
3. [自定义时间触发模式下的time_list_edit](#自定义时间触发模式下的time_list_edit)
4. [on_trigger_type_changed方法详解](#on_trigger_type_changed方法详解)
5. [generate_time_points方法详解](#generate_time_points方法详解)
6. [触发配置对策略执行的影响](#触发配置对策略执行的影响)

## 触发方式配置概述

触发方式设置是量化策略执行的核心配置之一，它决定了策略在何种条件下被激活和运行。在KHQuant系统中，用户可以通过`TriggerConfigGroup`类提供的界面，选择不同的触发类型来控制策略的执行频率和时机。主要的触发类型包括Tick触发、K线触发和自定义时间触发。每种触发类型都有其特定的应用场景和配置要求。通过合理设置触发方式，用户可以精确控制策略的运行节奏，从而优化策略的性能和效果。

**Section sources**
- [GUIkhQuant.py](file://GUIkhQuant.py#L1657-L1800)
- [GUI.py](file://GUI.py#L31-L85)

## K线触发模式下的kline_cycle_combo

在K线触发模式下，`kline_cycle_combo`下拉框用于选择具体的K线周期，如1分钟、5分钟或日K线。当用户选择“K线触发”作为触发类型时，该下拉框会显示并允许用户选择所需的K线周期。不同的K线周期对应不同的数据粒度和策略执行频率。例如，1分钟K线触发意味着策略会在每个1分钟K线形成时执行一次，而5分钟K线触发则在每个5分钟K线形成时执行。这种配置方式使得用户可以根据策略的需求选择合适的时间框架，从而实现对市场动态的精准捕捉。

**Section sources**
- [GUIkhQuant.py](file://GUIkhQuant.py#L1664-L1669)
- [khFrame.py](file://khFrame.py#L113-L179)

## 自定义时间触发模式下的time_list_edit

在自定义时间触发模式下，`time_list_edit`文本框用于输入用户自定义的触发时间点列表。用户可以在该文本框中每行输入一个时间点，格式为HH:MM:SS。例如，可以设置在每天的09:30:00、10:00:00和10:30:00等特定时间点触发策略。此外，系统还提供了一个时间点生成器，用户可以通过设置开始时间、结束时间和时间间隔来自动生成一系列规则的时间点。这种方式特别适用于需要在特定时间执行的策略，如开盘集合竞价策略或收盘前交易策略。

**Section sources**
- [GUIkhQuant.py](file://GUIkhQuant.py#L1703-L1763)
- [README.md](file://README.md#L943-L967)

## on_trigger_type_changed方法详解

`on_trigger_type_changed`方法是响应触发类型变化的核心方法。当用户在界面上选择不同的触发类型时，该方法会被调用，根据所选的触发类型动态地显示或隐藏相关的配置控件。例如，当选择“K线触发”时，`kline_cycle_combo`下拉框会被显示，而`time_list_edit`文本框则会被隐藏；反之，当选择“自定义时间触发”时，`time_list_edit`文本框会被显示，而`kline_cycle_combo`下拉框则会被隐藏。这种方法确保了用户界面的简洁性和易用性，避免了不必要的配置项干扰用户的操作。

**Section sources**
- [GUIkhQuant.py](file://GUIkhQuant.py#L3611-L3633)
- [GUIkhQuant.py](file://GUIkhQuant.py#L228-L259)

## generate_time_points方法详解

`generate_time_points`方法用于生成规则的时间点序列。该方法首先获取用户在界面上设置的开始时间、结束时间和时间间隔，然后根据这些参数生成一系列符合要求的时间点。生成的时间点会自动过滤掉非交易时段的时间点，确保生成的时间点都在交易时段内。生成的时间点序列会被设置到`time_list_edit`文本框中，供用户查看和使用。这种方法为用户提供了一种便捷的方式来生成大量规则的时间点，从而简化了自定义时间触发的配置过程。

**Section sources**
- [GUIkhQuant.py](file://GUIkhQuant.py#L3651-L3731)
- [GUIkhQuant.py](file://GUIkhQuant.py#L260-L271)

## 触发配置对策略执行的影响

触发配置直接影响策略的执行频率和时机。不同的触发类型和配置参数会导致策略在不同的时间点被激活，从而影响策略的性能和效果。例如，Tick触发模式下，策略会在每个Tick数据到来时执行，适合需要高频交易的策略；而K线触发模式下，策略会在每个K线形成时执行，适合基于技术指标的策略。自定义时间触发模式则提供了最大的灵活性，用户可以根据具体需求设置任意的时间点来触发策略。通过合理配置触发方式，用户可以优化策略的执行效率，提高策略的收益和稳定性。

**Section sources**
- [khFrame.py](file://khFrame.py#L52-L200)
- [README.md](file://README.md#L943-L967)